name: Repost GitHub Issue Comments to Discord (Fancy)

on:
  issue_comment:
    types: [created]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send issue comment to Discord with embed
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          AUTHOR_NAME="${{ github.event.comment.user.login }}"
          AUTHOR_AVATAR="${{ github.event.comment.user.avatar_url }}"
          COMMENT_URL="${{ github.event.comment.html_url }}"
          ISSUE_URL="${{ github.event.issue.html_url }}"
          ISSUE_TITLE="${{ github.event.issue.title }}"
          COMMENT_BODY_RAW="${{ github.event.comment.body }}"
          TIMESTAMP=$(date -u +"%Y-%m-%dT%H:%M:%SZ")

          # Truncate comment body to fit Discord embed limit (4096 chars max)
          COMMENT_BODY=$(echo "$COMMENT_BODY_RAW" | cut_
