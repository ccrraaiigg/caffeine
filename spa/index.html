<!-- Caffeine in a "single-page application" context, version 4 -->
<!-- TODO: Identify rendering quirks-mode dependencies and eliminate them, set DOCTYPE properly. -->

<html charset="utf-8">
  <head id="magic">
    <title>Caffeine :: livecode the web</title>

    <link rel="manifest"
	  href="/manifest.webmanifest">

    <link rel="stylesheet"
	  href="/css/caffeine.css">

    <link rel="apple-touch-icon"
	  href="/pictures/icons/caffeine/caffeineWebAppIcon192.png">
    
    <link rel="apple-touch-startup-image"
	  href="/pictures/backgrounds/bootscreen/bootscreen.png">
    
    <meta name="apple-mobile-web-app-capable"
	  content="yes">

    <meta name="apple-mobile-web-app-status-bar-style"
	  content="black-translucent">

    <meta name="apple-mobile-web-app-title"
	  content="Caffeine">

    <meta name="viewport"
	  content="width=1200, user-scalable=0"></head>

  <body bgcolor="black"
	style="margin: 0px;
	       min-width: 100%;
	       font-size: 16px;">

    <script defer type="text/javascript"
	    src="js/zlib/bower_components/pako/dist/pako_inflate.min.js"></script>
    
    <script defer type="text/javascript"
	    src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script defer type="text/javascript"
	    src="/js/hex.js"></script>
    
    <script defer type="text/javascript"
	    src="/js/osc/osc-browser.min.js"></script>
	    
    <script defer type="text/javascript"
	    src="https://player.vimeo.com/api/player.js"></script>

    <script defer type="text/javascript"
	    src="/js/hydra.js"></script>
    
    <script defer type="text/javascript"
	    src="https://cdn.jsdelivr.net/npm/webmidi@latest/dist/iife/webmidi.iife.js"></script>
    
    <script defer type="text/javascript"
	    src='https://unpkg.com/mpe@1.0.4/lib/mpe.min.js'></script>
    
    <script defer type="text/javascript"
	    src="https://unpkg.com/tone@latest/build/Tone.js"></script>
    
<!--    <script defer type="text/javascript"
	    src="/js/tonejs-instruments/Tonejs-Instruments.js"></script> -->

    <script defer type="text/javascript"
	    src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

    <script defer type="text/javascript"
	    src="https://unpkg.com/@croquet/croquet"></script>

    <script defer type="module"
	    src="https://unpkg.com/@papyrs/stylo@latest/dist/stylo/stylo.esm.js"></script>

    <script defer type="module"
	    src="https://unpkg.com/deep-chat@2.1.1/dist/deepChat.bundle.js"></script>

    <br>

    <div id="banner"
	 style="position: absolute;
		left: 30%;
		margin: 0 auto;
		transition: opacity 500ms;
		opacity: 0;">

      <img src="/pictures/icons/caffeine/caffeineWebAppIcon192.png"
	   width="65"
	   id="logo"
	   style="border-radius: 10px;
		  opacity: 0.7;">

      <h1 style="width: 350px;
		 background-color: rgba(255, 255, 255, 0.6);
		 color: black;
		 border-radius: 10px;">

	caffeine.js.org :: <i>Livecode the Web</i></h1>

      <img id="qrcode"
	   src="/pictures/icons/browser/qr.png"
	   width="65"
	   style="border-radius: 6px; opacity: 0.7;"></div>

    <div id="movie"
	 style="opacity: 0;
		border: 2px inset gray;
		position: absolute;
		top: 200;
		left: 150;
		transition: opacity 500ms, box-shadow 300ms;">

      <iframe
	src="https://player.vimeo.com/video/286872152?api=1"
	width="640"
	height="400"
	frameborder="0"
	allow="fullscreen"
	webkitallowfullscreen
	mozallowfullscreen
	allowfullscreen></iframe></div>

    <div id="caffeine-div"
	 style="pointer-events: none;
		border: 2px inset gray;
		position: absolute;
		top: 280;
		left: 120;
		z-index: 1;
		opacity: 0;
		transition: opacity 500ms; visibility 500ms">

      <center>

	<iframe id="caffeine-frame"
		style="overflow: hidden, opacity 500ms, visibility 500ms;"
		src="/squeak.html"
		allow="microphone 'self'"
		marginheight="0"
		marginwidth="0"
		width="1000"
		height="400"
		frameborder="0"
		scrolling="no"
		allowfullscreen></iframe></center></div>

    <div id="dashboard"
	 style="position: fixed;
		right: 10px;
		bottom: 10px;
		z-index: 2000;
		opacity: 0;
		transition: opacity 2000ms;">

      <div id="progress-spinner"
	   style="position: absolute;
		  right: 0px;
		  bottom: 0px;
		  width: 50px;
		  height: 50px;
		  opacity: 0;
		  transition: opacity 500ms;"></div>

      <div id="settings"
	   style="position: absolute;
		  right: 0px;
		  bottom: 0px;">

	<input id="settings.button"
	       type="image"
	       src="/pictures/icons/browser/settings.png"
	       tabindex="-1"
	       width="50"
	       height="50"
	       style="user-select: none;
		      outline: none;"></div></div>

    <script>
      window.appID = "4599d316-a13e-46ef-92be-c7337899038c"

      document.body.addEventListener(
	'mousemove',
	(event) => {window.lastMouseEvent = event})
    </script>
  </body>
</html>
